@using Microsoft.AspNetCore.Mvc.TagHelpers
@model HxPostExample

<div x-data='setup()'>
    <form hx-post hx-page="HxPostExample" hx-page-handler="Validate" hx-swap="outerHTML"
          class="form-horizontal needs-validation" _="on htmx:beforeSend set #submitButton.disabled to 'disabled'">
        <div class="mb-3">
            <label class="form-label" asp-for="Name"></label>
            <input type="text" class="form-control" asp-for="Name">
            <div class="invalid-feedback">
                <span asp-validation-for="Name"></span>
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label" asp-for="Age"></label>
            <input type="text" class="form-control" asp-for="Age">
            <div class="invalid-feedback">
                <span asp-validation-for="Age"></span>
            </div>
        </div>

        <div class="control">
            <button id="submitButton" class="btn btn-primary">
                <span class="htmx-indicator">
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    <span class="visually-hidden">Loading...</span>
                </span>
                Submit
            </button>


            @Html.AntiForgeryToken()
        </div>

    </form>


    <form hx-post method="post">
        <button
            hx-swap="outerHTML"
            class="btn btn-primary"
            asp-page-handler="Register">
            Delete
        </button>
    </form>

    <form hx-delete method="delete">
        <button
            hx-swap="outerHTML"
            class="btn btn-accent"
            asp-page-handler="UnRegister">
            Delete
        </button>
        <button
            hx-swap="outerHTML"
            asp-page-handler="SomeStuff"
            class="btn btn-accent">
            Delete my stuff
        </button>
    </form>

</div>

<script>
    function setup () {
        foo: 'bar'    
    }
</script>