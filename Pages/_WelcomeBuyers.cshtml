@model IndexModel

@{
    string secret_passphrase = Environment.GetEnvironmentVariable("BUYER_PASSPHRASE");
}

<section x-data="setup()">

    <div class="hero min-h-screen bg-base-200">
        <div class="hero-content flex-col lg:flex-row-reverse">
            <div class="text-center lg:text-left">
                <h1 class="text-5xl font-bold">Login now!</h1>
                <p class="py-6">Please login with the password I gave you.</p>
            </div>
            <div class="card flex-shrink-0 w-full max-w-sm shadow-2xl bg-base-100">
                <div class="card-body">
                    <div x-show="false" class="form-control">
                        <label class="label">
                            <span class="label-text">Email</span>
                        </label>
                        <input type="text" placeholder="email" class="input input-bordered"/>
                    </div>
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text">Password</span>
                        </label>
                        <input :value="buyer_pwd" x-model="buyer_pwd" type="password" placeholder="password" class="input input-bordered"/>
                        <span
                            :class="correct_password ? 'border-2 border-success' : 'border-error border-2 ' "
                            x-text="correct_password ? 'correct!' : 'incorrect pwd'">
                        </span>
                        <label class="label">
                            <a href="#" class="label-text-alt link link-hover">Forgot password?</a>
                        </label>
                    </div>
                    <div class="form-control mt-6">
                        <a href="/PrivateSales">
                            <button :disabled="!correct_password"
                                    :class="correct_password ? 'btn btn-success' : 'btn btn-error'">
                                See Listings
                            </button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

</section>

<script>
    var _secrtpwd = '@secret_passphrase';

    function setup(){
        return {
            hero_title: "Welcome Buyer to my Gun Listings!",
            buyer_pwd: '',
            get correct_password () { 
                    let matching = this.buyer_pwd === _secrtpwd;
                    return matching;
                }
            }
    }
</script>
@* <div class="hero min-h-screen bg-base-200"> *@
@*     <div class="hero-content text-center"> *@
@*         <form class="max-w-md"> *@
@*             <h1 x-text="hero_title" class="text-5xl font-bold"></h1> *@
@* *@
@*             <div class=" flex flex-column gap-2 "> *@
@* *@
@*                 <div class="flex flex-row"> *@
@* *@
@*                     <label>Buyers, enter your password here:</label> *@
@* *@
@*                     <input type="text" x-model="buyer_pwd" :value="buyer_pwd"> *@
@*                 </div> *@
@* *@
@*                 <a class="btn btn-accent" x-show="correct_password" href="/PrivateSales"> *@
@*                     <button>Go to Listings</button> *@
@*                 </a> *@
@*             </div> *@
@*         </form> *@
@*     </div> *@
@* </div> *@